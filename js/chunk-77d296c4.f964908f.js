(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77d296c4"],{1276:function(e,t,i){"use strict";var n=i("d784"),a=i("44e7"),s=i("825a"),l=i("1d80"),r=i("4840"),o=i("8aa5"),u=i("50c4"),c=i("14c3"),d=i("9263"),h=i("d039"),p=[].push,m=Math.min,f=4294967295,g=!h((function(){return!RegExp(f,"y")}));n("split",2,(function(e,t,i){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,i){var n=String(l(this)),s=void 0===i?f:i>>>0;if(0===s)return[];if(void 0===e)return[n];if(!a(e))return t.call(n,e,s);var r,o,u,c=[],h=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,g=new RegExp(e.source,h+"g");while(r=d.call(g,n)){if(o=g.lastIndex,o>m&&(c.push(n.slice(m,r.index)),r.length>1&&r.index<n.length&&p.apply(c,r.slice(1)),u=r[0].length,m=o,c.length>=s))break;g.lastIndex===r.index&&g.lastIndex++}return m===n.length?!u&&g.test("")||c.push(""):c.push(n.slice(m)),c.length>s?c.slice(0,s):c}:"0".split(void 0,0).length?function(e,i){return void 0===e&&0===i?[]:t.call(this,e,i)}:t,[function(t,i){var a=l(this),s=void 0==t?void 0:t[e];return void 0!==s?s.call(t,a,i):n.call(String(a),t,i)},function(e,a){var l=i(n,e,this,a,n!==t);if(l.done)return l.value;var d=s(e),h=String(this),p=r(d,RegExp),v=d.unicode,b=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(g?"y":"g"),x=new p(g?d:"^(?:"+d.source+")",b),w=void 0===a?f:a>>>0;if(0===w)return[];if(0===h.length)return null===c(x,h)?[h]:[];var k=0,y=0,R=[];while(y<h.length){x.lastIndex=g?y:0;var C,_=c(x,g?h:h.slice(y));if(null===_||(C=m(u(x.lastIndex+(g?0:y)),h.length))===k)y=o(h,y,v);else{if(R.push(h.slice(k,y)),R.length===w)return R;for(var E=1;E<=_.length-1;E++)if(R.push(_[E]),R.length===w)return R;y=k=C}}return R.push(h.slice(k)),R}]}),!g)},1769:function(e,t,i){"use strict";var n=i("ebbd"),a=i.n(n);a.a},"35b3":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"favoritesEdit"},[i("h2",{staticClass:"pageTitle"},[e._v("作品"+e._s(e.id?"编辑":"创建"))]),i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",staticClass:"form",staticStyle:{"max-width":"800px"},attrs:{model:e.model,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"收藏名称"}},[i("el-input",{model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),i("el-form-item",{attrs:{label:"收藏描述"}},[i("el-input",{model:{value:e.model.desc,callback:function(t){e.$set(e.model,"desc",t)},expression:"model.desc"}})],1),i("el-form-item",{attrs:{label:"链接地址"}},[i("el-input",{model:{value:e.model.link,callback:function(t){e.$set(e.model,"link",t)},expression:"model.link"}})],1),i("el-form-item",{attrs:{label:"缩略图"}},[i("el-upload",{attrs:{"list-type":"picture-card",action:e.uploadUrl,"auto-upload":!1,limit:1,"on-exceed":e.uploadExceed,"on-change":e.uploadChange,"on-remove":e.uploadRemove}},[e.model.thumb?i("img",{staticClass:"avatar",attrs:{src:e.model.thumb}}):i("i",{staticClass:"el-icon-plus"}),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("小提示")])])],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(" 立即"+e._s(e.id?"修改":"创建")+" ")]),i("el-button",{on:{click:function(t){return e.$router.push("/admin/favoritesList")}}},[e._v(" 返回 ")])],1)],1)],1)},a=[],s=(i("ac1f"),i("1276"),i("96cf"),i("89ba")),l=i("365c"),r=i("99b1"),o={name:"edit",props:["id"],data:function(){return{loading:!1,model:{thumb:""},photoList:[],files:{},url:r["a"]}},computed:{uploadUrl:function(){return r["a"]+"upload"}},methods:{onSubmit:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.loading=!0,i=new FormData,n="",!("raw"in this.files)){e.next=8;break}return i.append("file",this.files.raw),e.next=7,l["a"].uploadFile(i);case 7:n=e.sent;case 8:if(!this.id){e.next=14;break}return e.next=11,l["a"].updateFavoritesOne(this.id,Object.assign({},this.model,{thumb:n.url||""}));case 11:t=e.sent,e.next=17;break;case 14:return e.next=16,l["a"].createFavorites(Object.assign({},this.model,{thumb:n.url||""}));case 16:t=e.sent;case 17:t&&(this.$router.push("/admin/favoritesList"),this.$message({message:t.message,type:"success"})),this.loading=!1;case 19:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchDetail:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["a"].fetchFavoritesDetail(this.id);case 2:this.model=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),uploadExceed:function(){this.$message("最多只能上传一个图片")},uploadChange:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.model.thumb){e.next=3;break}return e.next=3,l["a"].deleteFile(this.model.thumb.split("/").pop());case 3:i.length&&(this.files=t,this.model.thumb=t.url);case 4:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),uploadRemove:function(){this.files={},this.model.thumb=""}},created:function(){this.loading=!0,this.id&&this.fetchDetail(),this.loading=!1}},u=o,c=(i("1769"),i("2877")),d=Object(c["a"])(u,n,a,!1,null,"ca802e84",null);t["default"]=d.exports},"44e7":function(e,t,i){var n=i("861d"),a=i("c6b6"),s=i("b622"),l=s("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[l])?!!t:"RegExp"==a(e))}},ebbd:function(e,t,i){}}]);
//# sourceMappingURL=chunk-77d296c4.f964908f.js.map