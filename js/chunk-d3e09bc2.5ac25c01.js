(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d3e09bc2"],{1276:function(e,t,n){"use strict";var i=n("d784"),a=n("44e7"),r=n("825a"),s=n("1d80"),l=n("4840"),o=n("8aa5"),u=n("50c4"),c=n("14c3"),d=n("9263"),h=n("d039"),p=[].push,m=Math.min,f=4294967295,g=!h((function(){return!RegExp(f,"y")}));i("split",2,(function(e,t,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var i=String(s(this)),r=void 0===n?f:n>>>0;if(0===r)return[];if(void 0===e)return[i];if(!a(e))return t.call(i,e,r);var l,o,u,c=[],h=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,g=new RegExp(e.source,h+"g");while(l=d.call(g,i)){if(o=g.lastIndex,o>m&&(c.push(i.slice(m,l.index)),l.length>1&&l.index<i.length&&p.apply(c,l.slice(1)),u=l[0].length,m=o,c.length>=r))break;g.lastIndex===l.index&&g.lastIndex++}return m===i.length?!u&&g.test("")||c.push(""):c.push(i.slice(m)),c.length>r?c.slice(0,r):c}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var a=s(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,a,n):i.call(String(a),t,n)},function(e,a){var s=n(i,e,this,a,i!==t);if(s.done)return s.value;var d=r(e),h=String(this),p=l(d,RegExp),v=d.unicode,b=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(g?"y":"g"),x=new p(g?d:"^(?:"+d.source+")",b),w=void 0===a?f:a>>>0;if(0===w)return[];if(0===h.length)return null===c(x,h)?[h]:[];var k=0,y=0,R=[];while(y<h.length){x.lastIndex=g?y:0;var C,_=c(x,g?h:h.slice(y));if(null===_||(C=m(u(x.lastIndex+(g?0:y)),h.length))===k)y=o(h,y,v);else{if(R.push(h.slice(k,y)),R.length===w)return R;for(var E=1;E<=_.length-1;E++)if(R.push(_[E]),R.length===w)return R;y=k=C}}return R.push(h.slice(k)),R}]}),!g)},"44e7":function(e,t,n){var i=n("861d"),a=n("c6b6"),r=n("b622"),s=r("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==a(e))}},"4d0c":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bannerEdit"},[n("h2",{staticClass:"pageTitle"},[e._v("banner"+e._s(e.id?"编辑":"创建"))]),n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",staticClass:"form",staticStyle:{"max-width":"800px"},attrs:{model:e.model,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),n("el-form-item",{attrs:{label:"上传图片"}},[n("el-upload",{attrs:{"list-type":"picture-card",action:e.uploadUrl,"auto-upload":!1,limit:1,"on-exceed":e.uploadExceed,"on-change":e.uploadChange,"on-remove":e.uploadRemove}},[e.model.image?n("img",{staticClass:"avatar",attrs:{src:e.model.image}}):n("i",{staticClass:"el-icon-plus"}),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("小提示")])])],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(" 立即"+e._s(e.id?"修改":"创建")+" ")]),n("el-button",{on:{click:function(t){return e.$router.push("/admin/bannerList")}}},[e._v(" 返回 ")])],1)],1)],1)},a=[],r=(n("ac1f"),n("1276"),n("96cf"),n("89ba")),s=n("365c"),l=n("99b1"),o={name:"edit",props:["id"],data:function(){return{loading:!1,files:{},model:{},url:l["a"]}},computed:{uploadUrl:function(){return l["a"]+"upload"}},methods:{onSubmit:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.loading=!0,n=new FormData,i="",!("raw"in this.files)){e.next=8;break}return n.append("file",this.files.raw),e.next=7,s["a"].uploadFile(n);case 7:i=e.sent;case 8:if(!this.id){e.next=14;break}return e.next=11,s["a"].updateBannerOne(this.id,Object.assign({},this.model,{image:i.url||""}));case 11:t=e.sent,e.next=17;break;case 14:return e.next=16,s["a"].createBanner(Object.assign({},this.model,{image:i.url||""}));case 16:t=e.sent;case 17:t&&(this.$router.push("/admin/bannerList"),this.$message({message:t.message,type:"success"})),this.loading=!1;case 19:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchDetail:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,s["a"].fetchBannerDetail(this.id);case 3:this.model=e.sent,this.loading=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),uploadExceed:function(){this.$message("最多只能上传一个图片")},uploadChange:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.model.image){e.next=3;break}return e.next=3,s["a"].deleteFile(this.model.image.split("/").pop());case 3:n.length&&(this.files=t,this.model.image=t.url);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}(),uploadRemove:function(){this.files={},this.model.image=""}},created:function(){this.id&&this.fetchDetail()}},u=o,c=(n("590c"),n("2877")),d=Object(c["a"])(u,i,a,!1,null,"620132fe",null);t["default"]=d.exports},"590c":function(e,t,n){"use strict";var i=n("5e8f"),a=n.n(i);a.a},"5e8f":function(e,t,n){}}]);
//# sourceMappingURL=chunk-d3e09bc2.5ac25c01.js.map